<div class="container">

<h2>Post Your Need</h2>
<%= form_for([@user, @user.posts.build]) do |p| %>

<p>
	<%= p.text_field :post_title, :placeholder => "What's your post title?", class: "sign_up_text" %>
</p>

<p>
	<%= p.text_field :description, :placeholder => 'Describe your need.', class: "sign_up_text" %>
</p>

<p>
	<%= p.text_field :points, :placeholder => 'Offering Civly Coins?', class: "sign_up_text" %>
</p>

<p>
	<%= p.hidden_field :lat %>
	<%= p.hidden_field :lon %> 

<%= p.submit 'Submit', :class => "btn-3d red" %>

<% end %>

<script>

var latitude;
var longitude;


function getLocation()
  {
  if (navigator.geolocation)
    {
    navigator.geolocation.getCurrentPosition(showPosition);
   	}
  else{
  	console.log("Geolocation is not supported by this browser.")
  	}
  }

function showPosition(position)
  {
  	latitude = position.coords.latitude;
  	longitude = position.coords.longitude;

  	// set the hidden lat lon field in form
  	$("#post_lat").val(latitude);
  	$("#post_lon").val(longitude);


  console.log("Latitude: " + latitude + 
  " Longitude: " + longitude);
  }

  getLocation();
</script>



</div>
